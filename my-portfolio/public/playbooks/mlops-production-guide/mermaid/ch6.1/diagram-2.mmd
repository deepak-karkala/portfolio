---
config:
  look: neo
  theme: redux-color
  themeVariables:
    fontFamily: 'Inter, ui-sans-serif, system-ui'
    fontSize: '16px'
    primaryTextColor: '#0F172A'
    lineColor: '#000000'
    edgeLabelBackground: '#FFFFFF'
    clusterTextSize: '18px'
    clusterTextWeight: '700'
---
flowchart TB
  subgraph SRC[Sources]
    LOG[Events/Logs]
    DB["(OLTP/CDC)"]
    WH["(Warehouse/Lake)"]
  end

  subgraph FEAT[Feature Computation]
    BATCH[Batch Feature Jobs]
    STR[Streaming Feature Jobs]
    OD["On-demand Transforms<br/>(in inference)"]
  end

  subgraph STORE[Feature Storage]
    OFF["Offline Feature Tables<br/>(PIT capable)"]
    ON[Online Feature Store/KV]
    REG["Feature Registry<br/>(metadata+versions)"]
  end

  subgraph SERVE[Serving/Training]
    TRAIN[Training Dataset Builder
PIT joins]
    INF[Inference Service]
  end

  subgraph OBS[Observability]
    MON[Freshness/Null/Drift Monitors]
    PAR[Parity Canary
online vs offline]
  end

  LOG --> STR --> ON
  DB --> STR
  WH --> BATCH --> OFF
  BATCH --> REG
  STR --> REG

  OFF --> TRAIN
  ON --> INF
  OD --> INF

  OFF --> PAR
  ON --> PAR
  ON --> MON
  OFF --> MON
%% Pastel Node Classes (Design System - Thicker Borders)
classDef sourceStyle fill:#E0F2FE,stroke:#38BDF8,stroke-width:2.5px,color:#0F172A,font-weight:600
classDef ingestionStyle fill:#E9D5FF,stroke:#A78BFA,stroke-width:2.5px,color:#0F172A,font-weight:600
classDef storageStyle fill:#FEF9C3,stroke:#FACC15,stroke-width:2.5px,color:#0F172A,font-weight:600
classDef transformStyle fill:#DCFCE7,stroke:#4ADE80,stroke-width:2.5px,color:#0F172A,font-weight:600
classDef serveStyle fill:#FCE7F3,stroke:#F472B6,stroke-width:2.5px,color:#0F172A,font-weight:600
classDef opsStyle fill:#FFEDD5,stroke:#FB923C,stroke-width:2.5px,color:#0F172A,font-weight:600
