---
config:
  look: neo
  theme: redux-color
  themeVariables:
    fontFamily: 'Inter, ui-sans-serif, system-ui'
    fontSize: '16px'
    primaryTextColor: '#1F2430'
    lineColor: '#3A3A3A'
    edgeLabelBackground: '#FFFFFF'
    clusterTextSize: '15px'
    clusterTextWeight: '600'
    borderRadius: '4'
    shadowColor: '#000000'
    shadowOpacity: '0.15'
    shadowBlur: '4'
  flowchart:
    curve: basis
    nodeSpacing: 50
    rankSpacing: 70
---
flowchart LR
  A[Prod traffic + HITL outcomes] --> B[Curate trajectories<br/>state, actions, tool calls, artifacts]
  B --> C[Define graders<br/>rules + rubric + safety + cost]
  C --> D[RFT training loop<br/>sample -> grade -> update]
  D --> E[Checkpoint eval gate<br/>offline + shadow + canary]
  E --> F[Deploy best checkpoint]
  F --> A

  subgraph G[Optional scale levers]
    G1[Process rewards<br/>step-wise scoring]:::x
    G2[Auto reward design<br/>reward model]:::x
    G3[Curriculum generation<br/>weakness targeting]:::x
  end
  B --> G1
  B --> G2
  E --> G3

  classDef mainStyle fill:#EEEAFE,stroke:#9B8BFF,stroke-width:2px,color:#1F2430;
  classDef leverStyle fill:#FFFFFF,stroke:#B6B6B6,stroke-width:1.8px,color:#1F2430;

  class A,B,C,D,E,F mainStyle
  class G1,G2,G3 leverStyle

  style G fill:#FFF9D6,stroke:#D6CF7A,stroke-width:2px,rx:6,ry:6,font-size:15px,font-weight:600
