---
config:
  look: neo
  theme: base
  themeVariables:
    fontFamily: 'Inter, ui-sans-serif, system-ui'
    fontSize: '16px'
    primaryTextColor: '#1F2430'
    lineColor: '#3A3A3A'
    edgeLabelBackground: '#FFFFFF'
    clusterTextSize: '15px'
    clusterTextWeight: '600'
    borderRadius: '4'
    shadowColor: '#000000'
    shadowOpacity: '0.15'
    shadowBlur: '4'
  flowchart:
    curve: basis
    nodeSpacing: 50
    rankSpacing: 70
---
flowchart TB
  CI[Tier 1: CI/CD<br/>Fast unit + golden integration<br/>Strict regression+safety gates]
  STG[Tier 2: Staging/Canary<br/>Full offline suite<br/>Simulations + LLM judge + calibration]
  PRD[Tier 3: Production<br/>Monitoring + A/B tests<br/>Drift/latency/cost/safety alerts]

  CI --> STG --> PRD
  PRD --> FB[Failures + real traces]
  FB -->|turn into tasks| CI

  classDef ciStyle fill:#E0F2FE,stroke:#38BDF8,stroke-width:2px,color:#0F172A;
  classDef stgStyle fill:#FEF9C3,stroke:#FACC15,stroke-width:2px,color:#0F172A;
  classDef prdStyle fill:#DCFCE7,stroke:#4ADE80,stroke-width:2px,color:#0F172A;
  classDef fbStyle fill:#FCE7F3,stroke:#F472B6,stroke-width:2px,color:#0F172A;

  class CI ciStyle
  class STG stgStyle
  class PRD prdStyle
  class FB fbStyle
